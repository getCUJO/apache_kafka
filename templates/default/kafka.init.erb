description "Kafka Broker"

# This file is managed by Chef
# Changes will be overwritten

start on runlevel [2345]
stop on starting rc RUNLEVEL=[016]

respawn
respawn limit 2 5

umask <%= @kafka_umask %>

kill timeout 300

pre-start script
    [ -r /etc/default/kafka ]
end script

limit nofile <%= @kafka_softlimit %> <%= @kafka_hardlimit %>

script
  [ -e "/etc/default/kafka" ] && . "/etc/default/kafka"
  exec start-stop-daemon --start --chuid ${KAFKA_USER} --name ${KAFKA_USER} \
    --exec ${KAFKA_BIN}/kafka-server-start.sh -- ${KAFKA_CONFIG}/server.properties
end script

